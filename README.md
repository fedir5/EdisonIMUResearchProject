# EdisonIMUResearchProject

recent: Added Display Code used to display the results
**box1.js**
was an attempt into displaying the box on a web server
it is called with:
**Box1h.html**
However the javascript currently only accepts datalogged values of angles.
Mosquitto mqtt needs to be added to the javascript in order to communicate with the Edison directly.
Also it is not certain that the way rotations are done in the javascript is correct, it might not be using Euler angles.

**IMUOrientationDisplay.java**
Is the working code in java to display the box. The only thing it requires is the box's ip address.
Mosquitto mqtt libraries for java are necessary in order for it to compile properly,
as well as Java3d libraries,
and the j3dcore-ogl.dll is needed (at least on Windows machines) in order for Java3d to work.

  
All the C and CPP Code Provided is the Code on the Edison board, 
All Java and JS code is run on the computer to display the results
but the code above calculates the sensor's orientation, and begins finding the joint orientations  
  
Files that initially read off sensor data provided by Sparkfun  
from: https://github.com/sparkfun/SparkFun_9DOF_Block_for_Edison_CPP_Library:  
**LSM9DS0_AHRS.cpp**  
**LSM9DS0_AHRS.h**  
**SFE_LSM9DS0.cpp**  
**SFE_LSM9DS0.h**  
**SparkFun_9DOF_Edison_Block_Example.cpp**  
^Only the SparkFun_9DOF_Edison_Block_Example.cpp code has been heavily edited, the rest are  untouched and are  
used to pull sensor data from the 9DOF sensor before sending it onwards  
  
Data is first passed on to Madgwick's algorithms taken  
from:http://x-io.co.uk/open-source-imu-and-ahrs-algorithms/  
which compute the orientation of the sensor  
**MadgwickAHRS.c**  
**MadgwickAHRS.h**  
I've edited the Madgwick file to take custom time values between sensor readings instead of a known delta_t  
  
**Quaternion.c**  
converts the Madgwick results from quaternions to Euler angles  
I think I wrote most of it following wikipedia and other sources...  
  
  
**outputMosquitto.cpp**  
^Allows the Edison to message output data over a wifi connection  
requires mosquitto libraries to be installed  
see the makefile for importing mosquitto libraries correctly upon compiling  
  
**mosquittoPubReadMe.cpp**  
was a test method to make sure the Mosquitto messenging was working  
  
File I've been working on to compute the orientation of the joint axis following the algorithms described by Thomas Seel:  
(in his paper:)  
https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4029684/  
**JointAxisOrientation.cpp**  
It takes gyroscope values from two sensors and computes the orientation of the joint axis in the local frames of each sensor.  
It is not yet operational, currently debugging the mistakes.  
  
**TemporarySecondStationarySensor.cpp**  
^contains 'fake' data for joint axis calculation that pretends there is a  
stationary second sensor in order to do the math in the JointAxisOrientation.cpp file  
  
**datalogResults.txt**  
and  
**datalog.txt**  
are just text files where datapoints can be stored  
they are automatically generated by the program, so should be deleted before running if one wishes to datalog the Edison's sensor readings over some time  
  
**Makefile**   
is used to compile the code  
**test**   
is used to run the code, the compiled code is run with ./test  
  
